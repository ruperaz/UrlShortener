{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",

  "ReverseProxy": {
    "Routes": {
      // ---------------- Identity ----------------
      "identity-swagger": {
        "ClusterId": "identityCluster",
        "Match": { "Path": "/identity/{**catch-all}" },
        "Transforms": [
          { "PathRemovePrefix": "/identity" }
        ]
      },
      "identity-api": {
        "ClusterId": "identityCluster",
        "Match": { "Path": "/api/auth/{**catch-all}" }
      },

      // ---------------- Links ----------------
      // Clean API path: /api/links -> LinkService /api/links
      "links-api": {
        "ClusterId": "linkCluster",
        "Match": { "Path": "/api/links/{**catch-all}" }
      },
      // Swagger path through gateway:
      // /links/swagger/v1/swagger.json -> LinkService /swagger/v1/swagger.json
      "links-swagger": {
        "ClusterId": "linkCluster",
        "Match": { "Path": "/links/{**catch-all}" },
        "Transforms": [
          { "PathRemovePrefix": "/links" }
        ]
      },

      // ---------------- Analytics ----------------
      // Clean API path: /api/analytics -> AnalyticsService /api/analytics
      "analytics-api": {
        "ClusterId": "analyticsCluster",
        "Match": { "Path": "/api/analytics/{**catch-all}" }
      },
      // Swagger path through gateway:
      // /analytics/swagger/v1/swagger.json -> AnalyticsService /swagger/v1/swagger.json
      "analytics-swagger": {
        "ClusterId": "analyticsCluster",
        "Match": { "Path": "/analytics/{**catch-all}" },
        "Transforms": [
          { "PathRemovePrefix": "/analytics" }
        ]
      }
    },

    "Clusters": {
      "identityCluster": {
        "Destinations": {
          "d1": { "Address": "http://localhost:5001" }
        }
      },
      "linkCluster": {
        "Destinations": {
          "d1": { "Address": "http://localhost:5002" }
        }
      },
      "analyticsCluster": {
        "Destinations": {
          "d1": { "Address": "http://localhost:5003" }
        }
      }
    }
  }
}
